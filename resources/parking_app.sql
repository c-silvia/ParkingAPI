CREATE DATABASE parking_app;
USE parking_app;
CREATE TABLE `login_data` (
  `user_id` int NOT NULL AUTO_INCREMENT,
  `username` varchar(255) NOT NULL,
  `email_address` varchar(255) NOT NULL,
  `password` varchar(255) NOT NULL,
  PRIMARY KEY (`user_id`),
  UNIQUE KEY `user_id_UNIQUE` (`user_id`),
  UNIQUE KEY `username_UNIQUE` (`username`),
  UNIQUE KEY `email_address_UNIQUE` (`email_address`)
) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
CREATE TABLE `parking_spot_data` (
    `spot_id` VARCHAR(45) NOT NULL,
    `vehicle_number` VARCHAR(100) DEFAULT NULL,
    PRIMARY KEY (`spot_id`),
    UNIQUE KEY `spot_id_UNIQUE` (`spot_id`),
    UNIQUE KEY `vehicle_number_UNIQUE` (`vehicle_number`)
)  ENGINE=INNODB DEFAULT CHARSET=UTF8MB4 COLLATE = UTF8MB4_0900_AI_CI;
CREATE TABLE `parked_vehicles_data` (
  `log_id` int NOT NULL AUTO_INCREMENT,
  `spot_id` varchar(45) NOT NULL,
  `vehicle_number` varchar(100) NOT NULL,
  `arrival_time` datetime NOT NULL,
  `selected_length_of_stay` float NOT NULL,
  `expected_departure_time` datetime NOT NULL,
  `has_left` tinyint NOT NULL,
  `actual_departure_time` datetime DEFAULT NULL,
  `has_expired` tinyint NOT NULL,
  PRIMARY KEY (`log_id`),
  KEY `spot_id_idx` (`spot_id`) /*!80000 INVISIBLE */,
  KEY `vehicle_number_idx` (`vehicle_number`),
  CONSTRAINT `spot_id` FOREIGN KEY (`spot_id`) REFERENCES `parking_spot_data` (`spot_id`)
) ENGINE=InnoDB AUTO_INCREMENT=15 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;

 -- Insertions

INSERT INTO parking_spot_data 
(spot_id, vehicle_number) 
VALUES
("A01","Z-810-TU"),
("A02","U-462-HB"),
("A03",NULL),
("A04","Q-658-LR"),
("A05","S-627-JM"),
("A06","W-267-BX"),
("A07","Z-601-FR"),
("A08",NULL),
("A09","I-703-XD"),
("A10","J-993-KJ"),
("A11","A-818-QA"),
("A12",NULL),
("A13",NULL),
("A14",NULL),
("A15",NULL),
("A16","L-682-RB"),
("A17",NULL),
("A18",NULL),
("A19","H-762-XC"),
("A20",NULL),
("A21",NULL),
("A22",NULL),
("A23",NULL),
("A24",NULL),
("A25",NULL),
("A26",NULL),
("A27",NULL),
("A28",NULL),
("A29",NULL),
("A30","C-193-YB"),
("A31","O-022-IH"),
("A32",NULL),
("A33",NULL),
("A34","Y-463-JG"),
("A35",NULL),
("A36",NULL),
("A37","J-716-KU"),
("A38",NULL),
("A39",NULL),
("A40",NULL),
("A41",NULL),
("A42",NULL),
("A43",NULL),
("A44","Y-112-WT"),
("A45","L-072-OS"),
("A46","R-482-VR"),
("A47",NULL),
("A48",NULL),
("A49",NULL),
("A50","I-505-DM"),
("A51",NULL),
("A52",NULL),
("A53",NULL),
("A54",NULL),
("A55","K-958-ZT"),
("A56",NULL),
("A57",NULL),
("A58",NULL),
("A59",NULL),
("A60","K-452-BM"),
("A61",NULL),
("A62","L-110-HM"),
("A63",NULL),
("A64","D-699-GO"),
("A65","F-130-AE"),
("A66",NULL),
("A67",NULL),
("A68",NULL),
("A69",NULL),
("A70","Q-944-VI"),
("A71","M-014-VG"),
("A72",NULL),
("A73",NULL),
("A74","G-659-WF"),
("A75","Q-523-CX"),
("A76",NULL),
("A77",NULL),
("A78",NULL),
("A79","H-608-SX"),
("A80",NULL),
("A81",NULL),
("A82","K-104-EA"),
("A83","Z-436-JD"),
("A84",NULL),
("A85","F-613-WZ"),
("A86",NULL),
("A87",NULL),
("A88","V-711-IR"),
("A89","J-611-SI"),
("A90",NULL),
("A91",NULL),
("A92",NULL),
("A93","A-113-HG"),
("A94",NULL),
("A95",NULL),
("A96",NULL),
("A97",NULL),
("A98",NULL),
("A99","P-333-MW"),
("A100",NULL),
("A101",NULL),
("A102",NULL),
("A103",NULL);

INSERT INTO parked_vehicles_data 
(spot_id, vehicle_number, arrival_time, selected_length_of_stay, expected_departure_time, has_left, actual_departure_time, has_expired)
VALUES
("A01","Z-810-TU","2022-11-20 02:51:23",226.14,"2022-11-29 13:05:23",0,NULL,0),
("A02","U-462-HB","2022-11-19 17:08:45",146.19,"2022-11-25 19:27:45",0,NULL,0),
("A04","Q-658-LR","2022-11-18 17:22:21",211.58,"2022-11-27 13:20:21",0,NULL,0),
("A05","S-627-JM","2022-11-18 00:02:45",155.41,"2022-11-24 11:43:45",0,NULL,0),
("A06","W-267-BX","2022-11-18 08:25:46",129.50,"2022-11-23 18:15:46",0,NULL,0),
("A07","Z-601-FR","2022-11-19 00:10:31",167.57,"2022-11-26 00:07:31",0,NULL,0),
("A09","I-703-XD","2022-11-18 09:57:12",226.38,"2022-11-27 20:35:12",0,NULL,0),
("A10","J-993-KJ","2022-11-20 03:59:18",165.30,"2022-11-27 01:29:18",0,NULL,0),
("A11","A-818-QA","2022-11-19 13:50:09",92.20,"2022-11-23 10:10:09",0,NULL,0),
("A16","L-682-RB","2022-11-20 05:42:38",123.58,"2022-11-25 09:40:38",0,NULL,0),
("A19","H-762-XC","2022-11-20 10:08:56",187.54,"2022-11-28 06:02:56",0,NULL,0),
("A30","C-193-YB","2022-11-20 16:18:54",215.30,"2022-11-29 15:48:54",0,NULL,0),
("A31","O-022-IH","2022-11-19 18:53:06",131.27,"2022-11-25 06:20:06",0,NULL,0),
("A34","Y-463-JG","2022-11-19 07:53:25",118.54,"2022-11-24 06:47:25",0,NULL,0),
("A37","J-716-KU","2022-11-20 01:57:50",75.36,"2022-11-23 05:33:50",0,NULL,0),
("A44","Y-112-WT","2022-11-20 07:30:41",111.50,"2022-11-24 23:20:41",0,NULL,0),
("A45","L-072-OS","2022-11-18 05:19:15",160.40,"2022-11-24 21:59:15",0,NULL,0),
("A46","R-482-VR","2022-11-18 15:05:22",203.20,"2022-11-27 02:25:22",0,NULL,0),
("A50","I-505-DM","2022-11-19 10:20:44",167.43,"2022-11-26 10:03:44",0,NULL,0),
("A55","K-958-ZT","2022-11-19 22:47:58",181.60,"2022-11-27 12:47:58",0,NULL,0),
("A60","K-452-BM","2022-11-18 06:40:00",81.16,"2022-11-21 15:56:00",0,NULL,0),
("A62","L-110-HM","2022-11-19 20:46:20",173.43,"2022-11-27 02:29:20",0,NULL,0),
("A64","D-699-GO","2022-11-18 19:09:25",230.25,"2022-11-28 09:34:25",0,NULL,0),
("A65","F-130-AE","2022-11-18 17:02:57",161.59,"2022-11-25 11:01:57",0,NULL,0),
("A70","Q-944-VI","2022-11-20 05:59:19",88.50,"2022-11-23 22:49:19",0,NULL,0),
("A71","M-014-VG","2022-11-20 22:07:20",188.37,"2022-11-28 18:44:20",0,NULL,0),
("A74","G-659-WF","2022-11-20 13:12:33",227.45,"2022-11-30 00:57:33",0,NULL,0),
("A75","Q-523-CX","2022-11-20 08:14:52",99.05,"2022-11-24 11:19:52",0,NULL,0),
("A79","H-608-SX","2022-11-20 11:31:29",223.53,"2022-11-29 19:24:29",0,NULL,0),
("A82","K-104-EA","2022-11-19 01:19:26",202.16,"2022-11-27 11:35:26",0,NULL,0),
("A83","Z-436-JD","2022-11-20 06:59:26",102.37,"2022-11-24 13:36:26",0,NULL,0),
("A85","F-613-WZ","2022-11-20 22:37:50",199.07,"2022-11-29 05:44:50",0,NULL,0),
("A88","V-711-IR","2022-11-20 07:16:44",199.41,"2022-11-28 14:57:44",0,NULL,0),
("A89","J-611-SI","2022-11-18 01:07:25",86.17,"2022-11-21 15:24:25",0,NULL,0),
("A93","A-113-HG","2022-11-18 15:47:23",106.45,"2022-11-23 02:32:23",0,NULL,0),
("A99","P-333-MW","2022-11-18 18:51:38",76.47,"2022-11-21 23:38:38",0,NULL,0);

INSERT INTO login_data
(username, email_address, password)
VALUES
("testuser", "testuser@test.dummy.com", "$2b$12$sT7kaXPkYI7YFVxkdworCORaZAI1xLa.3p30VIodr8K/FkeZ17HEi");